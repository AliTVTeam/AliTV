<html>
<head>
<meta charset="utf-8">
<style>
body {
	font: 10px sans-serif;
}

.chord path {
	fill-opacity: .67;
	stroke: #000;
	stroke-width: .5px;
}
</style>
</head>

<body>
	<script src="js/d3.v3.min.js"></script>
	<script src="js/jquery.min.js"></script>
	<script src="js/wgaPipeline.js"></script>
	<script>
		var full_karyo;
		var full_links;
		loadKaryoFile("test/karyo.json", function(karyo){
			full_karyo = karyo;
			var array = $.map(karyo, function(value, index) {
				return [ value ];
			});
			drawKaryo(array);
			loadLinkFile("test/link.json", karyo, function(links){
				full_links = links;
				drawLinks(links);
			});
		});
		
		function redraw(){
			clear_chords();
			var links = filter_links_by_length(full_links);
			drawLinks(links);
		}
		
		function filter_links_by_length(links){
			var filtered = new Array(); 
			$.each(links, function(index, value) {
				var len = Math.abs(value.source.start - value.source.end);
				if(len >= 10000){
					filtered.push(value);
				}
			});
			console.log(filtered);
			return filtered;
		}
	</script>
	<button onclick="redraw()">Filter alignments by length (>=10kbp)</button>
</body>
</html>
