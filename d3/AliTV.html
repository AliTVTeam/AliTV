<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="lib/jquery-ui.min.css">

<script src="lib/d3.v3.min.js"></script>
<script src="lib/jquery.min.js"></script>
<script src="lib/jquery-ui.min.js"></script>

<script src="js/AliTV.js"></script>

<script type="text/javascript">
	var wga;
	$(document).ready(function() {
		var svg = $('#wgaCanvas');
		wga = new AliTV(svg);
		$.getJSON('data/data.json', function(data) {
			wga.setData(data);
			$.getJSON('data/filters.json', function(filters) {
				wga.setFilters(filters);
				wga.drawLinear();
			});
		});
		
		//Set default values for API of graphical parameters
		$("#linearSpacer").val(wga.getLinearSpacer());
		$("#linearGenomeSpacer").val(wga.getLinearGenomeSpacer());
		$("#karyoHeight").val(wga.getKaryoHeight());
		$("#canvasWidth").val(wga.getCanvasWidth());
		$("#canvasHeight").val(wga.getCanvasHeight());
		$("#tickDistance").val(wga.getTickDistance());
		
	});
	function changeLinearSpacer(){
		var spacer = $("#linearSpacer").val();
		try {
		wga.setLinearSpacer(spacer); 
		wga.drawLinear();
		$("#linearSpacer").val(wga.getLinearSpacer());
		}
		catch(err){
			alert(err);
			$("#linearSpacer").val(wga.getLinearSpacer());
		}
	}
	function changeLinearGenomeSpacer(){
		var genomeSpacer = $("#linearGenomeSpacer").val(); 
		try {
		wga.setLinearGenomeSpacer(genomeSpacer); 
		wga.drawLinear();	
		}
		catch(err){
			alert(err);
			$("#linearGenomeSpacer").val(wga.getLinearGenomeSpacer());
		}
	}
	function changeKaryoHeight(){
		var height = $("#karyoHeight").val(); 
		try {
		wga.setKaryoHeight(height); 
		wga.drawLinear();	
		}
		catch(err){
			alert(err);
			$("#karyoHeight").val(wga.getKaryoHeight());
		}
	}
	function changeCanvasWidth(){
		var width = $("#canvasWidth").val(); 
		try {
		wga.setCanvasWidth(width); 
		wga.drawLinear();	
		}
		catch(err){
			alert(err);
			$("#canvasWidth").val(wga.getCanvasWidth());
		}
	}
	function changeCanvasHeight(){
		var height = $("#canvasHeight").val(); 
		try {
		wga.setCanvasHeight(height); 
		wga.drawLinear();	
		}
		catch(err){
			alert(err);
			$("#canvasHeight").val(wga.getCanvasHeight());
		}
	}
	function changeTickDistance(){
		var distance = $("#tickDistance").val(); 
		try {
		wga.setTickDistance(distance); 
		wga.drawLinear();	
		}
		catch(err){
			alert(err);
			$("#tickDistance").val(wga.getTickDistance());
		}
	}
</script>
</head>

<body>
<svg id='wgaCanvas'></svg>
<button type="button" onclick="wga.drawCircular();">Draw Circular</button> 
<button type="button" onclick="wga.drawLinear();">Draw Linear</button> 
</body>
 <form>
Spacer between chromsomes in the linear Layout:<br>
<input type="text" id="linearSpacer" onblur="changeLinearSpacer();">
<br>
Spacer between genomes in the linear Layout:<br>
<input type="text" id="linearGenomeSpacer" onblur="changeLinearGenomeSpacer();">
<br>
Height of the chromosomes:<br>
<input type="text" id="karyoHeight" onblur="changeKaryoHeight();">
<br>
Width:<br>
<input type="text" id="canvasWidth" onblur="changeCanvasWidth();">
<br>
Height:<br>
<input type="text" id="canvasHeight" onblur="changeCanvasHeight();">
<br>
Distance between ticks:<br>
<input type="text" id="tickDistance" onblur="changeTickDistance();">
<br>
</form> 
</html>
